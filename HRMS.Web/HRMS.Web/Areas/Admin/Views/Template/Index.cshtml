@using HRMS.Models.Template;
@model TemplateModel

@{
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Template";
    var HeaderImage = "";
    var FooterImage = "";
    if (!string.IsNullOrEmpty(Model.HeaderImage))
    {
        HeaderImage = Model.HeaderImage;// HRMS.Models.Common.Constants.EmployeePhotoPath + Model.CompanyID + "/" + Model.HeaderImage;
    }
    else
    {
        HeaderImage = HRMS.Models.Common.Constants.NoImagePath;
    }

    if (!string.IsNullOrEmpty(Model.FooterImage))
    {
        FooterImage = Model.FooterImage;// HRMS.Models.Common.Constants.EmployeePhotoPath + Model.CompanyID + "/" + Model.FooterImage;
    }
    else
    {
        FooterImage = HRMS.Models.Common.Constants.NoImagePath;
    }
}
<form method="post" enctype="multipart/form-data">
    <div class="Container">

        <div class="col-md-12" style="background-color: #a7b5ce; padding: 5px;padding-left: 10px;">
            <label class="form-label">Template Details </label>
        </div>
        <div class="row">
            &nbsp;
        </div>
        <div class="row">
            <div class="row">
                <div class="col-md-4">
                    <div class="col-md-12">
                        Template Name <label class="Mandetory">*</label>
                    </div>
                    <div class="col-md-12">
                        @Html.HiddenFor(x => x.TemplateID)
                        @Html.TextBoxFor(a => a.TemplateName, new { @class = "form-control", @required = "required" })

                    </div>
                </div>
                <div class="col-md-4">
                    <div class="col-md-12">
                        Letter Head Name<label class="Mandetory">*</label>
                    </div>
                    <div class="col-md-12">
                        @Html.TextBoxFor(a => a.LetterHeadName, new { @class = "form-control", @required = "required" })
                    </div>
                </div>
            </div>
            <div class="row">
                &nbsp;
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="col-md-12">
                        Header Image
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-4">
                            <img src="data:image/png;base64,@HeaderImage" style="width:100px; height:100px" />
                            <input type="file" name="HeaderImage" accept="image/*" />
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="col-md-12">
                        Footer Image
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-4">
                            <img src="data:image/png;base64,@FooterImage" style="width:100px; height:100px" />
                            <input type="file" name="FooterImage" accept="image/*" />
                        </div>

                    </div>
                </div>
            </div>
            <div class="row">
                &nbsp;
            </div>
            <div class="row">
                <div class="col-md-12">
                    <!-- Set column width to full width -->
                    <div class="col-md-12">
                        Description <label class="Mandetory">*</label>
                    </div>
                    <div class="col-md-12">

                        <!-- The toolbar will be rendered in this container. -->
                        <div id="toolbar-container"></div>

                        <!-- This container will become the editable. -->

                        <div id="editor">
                        </div>
                        <input type="hidden" id="description" name="description" />
                    </div>
                </div>
            </div>


            <div class="row">
                &nbsp;
            </div>


            <div class="row">
                <div class="col-md-12">
                    <input style="float:right" type="submit" value="Submit" class="btn btn-success" />
                    <input id="cancelButton" style="float:right; margin:0 16px;" type="button" value="Cancel" class="btn btn-success" />
                </div>

            </div>

        </div>
    </div>
</form>

<script>
    const editor = document.querySelector('#editor');
    const editorDataInput = document.querySelector('#description');
    DecoupledEditor
        .create(editor)
        .then(editor => {
            const toolbarContainer = document.querySelector('#toolbar-container');
            toolbarContainer.appendChild(editor.ui.view.toolbar.element);
            editor.setData('@Model.Description', { isHtml: true });

            const editorData = editor.getData();
            editorDataInput.value = editorData;

            // Listen for changes in the editor's content
            editor.model.document.on('change', () => {
                // Get the current content of the editor
                const editorContent = editor.getData();
                // Do something with the editor content, such as updating a preview or saving it
                editorDataInput.value = editorContent;
            });

        })
        .catch(error => {
            console.error(error);
        });

    document.getElementById('cancelButton').addEventListener('click', function () {
        window.location.href = '@Url.Action("TemplateListing", "Template")';
    });

</script>
